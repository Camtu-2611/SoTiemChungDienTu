{"remainingRequest":"D:\\DOAN\\Project\\SoTiemChungDienTu\\UI\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\DOAN\\Project\\SoTiemChungDienTu\\UI\\src\\views\\evaluate\\component\\EvaluateDetail.vue?vue&type=style&index=0&id=4a36eac8&lang=scss&scoped=true&","dependencies":[{"path":"D:\\DOAN\\Project\\SoTiemChungDienTu\\UI\\src\\views\\evaluate\\component\\EvaluateDetail.vue","mtime":1628900445841},{"path":"D:\\DOAN\\Project\\SoTiemChungDienTu\\UI\\node_modules\\css-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\DOAN\\Project\\SoTiemChungDienTu\\UI\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":499162500000},{"path":"D:\\DOAN\\Project\\SoTiemChungDienTu\\UI\\node_modules\\postcss-loader\\src\\index.js","mtime":499162500000},{"path":"D:\\DOAN\\Project\\SoTiemChungDienTu\\UI\\node_modules\\sass-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\DOAN\\Project\\SoTiemChungDienTu\\UI\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\DOAN\\Project\\SoTiemChungDienTu\\UI\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCg0KQGltcG9ydCAiQC9zdHlsZS9fdmFyaWFibGVzLnNjc3MiOw0KDQouZGV0YWlsLWNvbnRhaW5lciB7DQogIHdpZHRoOiAxMDAlOw0KICBoZWlnaHQ6IDEwMCU7DQoNCiAgLmlucHV0LWZpZWxkIHsNCiAgICAuaW5wdXQtbGFiZWwgew0KICAgICAgZm9udC1mYW1pbHk6ICJHb29nbGVTYW5zLUJvbGQiOw0KICAgIH0NCiAgICBpbnB1dCB7DQogICAgICBoZWlnaHQ6IDM2cHg7DQogICAgICBib3gtc2l6aW5nOiBib3JkZXItYm94Ow0KICAgICAgYm9yZGVyOiAjZDZkNmQ2IDFweCBzb2xpZDsNCiAgICAgIHBhZGRpbmc6IDEwcHg7DQogICAgICBiYWNrZ3JvdW5kLWNvbG9yOiB3aGl0ZTsNCiAgICB9DQogICAgLmRhdGUtcGlja2VyIHsNCiAgICAgIGJvcmRlcjogI2Q2ZDZkNiAxcHggc29saWQ7DQogICAgfQ0KICAgIHNlbGVjdCB7DQogICAgICBiYWNrZ3JvdW5kLWNvbG9yOiB3aGl0ZTsNCiAgICAgIGJvcmRlcjogI2Q2ZDZkNiAxcHggc29saWQ7DQogICAgICBoZWlnaHQ6IDM0cHg7DQogICAgICBtaW4td2lkdGg6IDEwMHB4Ow0KICAgICAgcGFkZGluZy1sZWZ0OiAxMHB4Ow0KICAgIH0NCiAgfQ0KDQogIC5zdW1tYXJ5LWlucHV0IHsNCiAgICBiYWNrZ3JvdW5kLWNvbG9yOiAkYmFja2dyb3VuZC1ldmFsdXRhdGU7DQogICAgcGFkZGluZzogMTZweCAxNnB4IDBweCAxNnB4Ow0KICAgIGhlaWdodDogZml0LWNvbnRlbnQ7DQoNCiAgICAuZC1oZWFkZXIgew0KICAgICAgaGVpZ2h0OiA2MHB4Ow0KICAgICAgZGlzcGxheTogZmxleDsNCiAgICAgIGFsaWduLWl0ZW1zOiBjZW50ZXI7DQogICAgICBmb250LXNpemU6IDEuNnJlbTsNCiAgICAgIG1hcmdpbi1ib3R0b206IDE2cHg7DQogICAgICAuYmFjay1idG4gew0KICAgICAgICBjdXJzb3I6IHBvaW50ZXI7DQogICAgICAgIG1hcmdpbi1yaWdodDogMjBweDsNCiAgICAgIH0NCg0KICAgICAgLmhlYWRlci10aXRsZSB7DQogICAgICAgIGZvbnQtZmFtaWx5OiAiR29vZ2xlU2Fucy1Cb2xkIjsNCiAgICAgIH0NCiAgICB9DQogICAgLmlucHV0LWNvbnRhaW5lciB7DQogICAgICB3aWR0aDogMTAwJTsNCiAgICAgIGRpc3BsYXk6IGZsZXg7DQogICAgICAubGVmdC1wYW5lIHsNCiAgICAgICAgd2lkdGg6IDgwJTsNCiAgICAgICAgLy8gYm9yZGVyLXJpZ2h0OiBzb2xpZCAxcHggZ3JleTsNCiAgICAgICAgcGFkZGluZy1yaWdodDogMTZweDsNCg0KICAgICAgICAuZmlyc3QtbGluZSB7DQogICAgICAgICAgZGlzcGxheTogZmxleDsNCiAgICAgICAgICBqdXN0aWZ5LWNvbnRlbnQ6IGZsZXgtc3RhcnQ7DQogICAgICAgICAgbWFyZ2luLWJvdHRvbTogMTJweDsNCiAgICAgICAgICBkaXYgew0KICAgICAgICAgICAgbWFyZ2luLXJpZ2h0OiAxMnB4Ow0KICAgICAgICAgIH0NCiAgICAgICAgfQ0KDQogICAgICAgIC5yZWFzb24gew0KICAgICAgICAgIHdpZHRoOiAxMDAlOw0KICAgICAgICAgIC5pbnB1dC1maWVsZCB7DQogICAgICAgICAgICB3aWR0aDogMTAwJTsNCiAgICAgICAgICAgIHNlbGVjdCB7DQogICAgICAgICAgICAgIHdpZHRoOiAxMDAlOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgIH0NCiAgICAgICAgfQ0KICAgICAgfQ0KICAgICAgLnJpZ2h0LXBhbmUgew0KICAgICAgICBwYWRkaW5nLWxlZnQ6IDE2cHg7DQogICAgICAgIHdpZHRoOiA0MCU7DQoNCiAgICAgICAgLnJlY29yZC1kYXRlIHsNCiAgICAgICAgICB3aWR0aDogMzAwcHg7DQogICAgICAgICAgbWFyZ2luLWJvdHRvbTogMTJweDsNCiAgICAgICAgfQ0KICAgICAgfQ0KICAgIH0NCiAgfQ0KDQogIC5kZXRhaWwtaW5wdXQgew0KICAgIHBhZGRpbmc6IDE2cHg7DQogICAgaGVpZ2h0OiBjYWxjKDEwMCUgLSAzNDdweCk7DQoNCiAgICAuZGV0YWlsLWxhYmVsIHsNCiAgICAgIGZvbnQtc2l6ZTogMS4ycmVtOw0KICAgICAgZm9udC1mYW1pbHk6ICJHb29nbGVTYW5zLUJvbGQiOw0KICAgICAgbWFyZ2luLWJvdHRvbTogOHB4Ow0KICAgIH0NCg0KICAgIC50YWJsZS13cmFwcGVyIHsNCiAgICAgIGhlaWdodDogY2FsYygxMDAlIC0gODVweCk7DQogICAgICBvdmVyZmxvdzogYXV0bzsNCiAgICAgIGJvcmRlcjogJGJvcmRlci1idXR0b24tYmFzaWMgc29saWQgMXB4Ow0KICAgICAgdGFibGUgew0KICAgICAgICB0aGVhZCB7DQogICAgICAgICAgdHI6bnRoLWNoaWxkKDIpIHsNCiAgICAgICAgICAgIHRoIHsNCiAgICAgICAgICAgICAgdG9wOiA0MHB4ICFpbXBvcnRhbnQ7DQogICAgICAgICAgICB9DQogICAgICAgICAgfQ0KDQogICAgICAgICAgdHIgew0KICAgICAgICAgICAgdGggew0KICAgICAgICAgICAgICBib3JkZXItcmlnaHQ6IDFweCBzb2xpZCAjZDZkNmQ2Ow0KICAgICAgICAgICAgICB6LWluZGV4OiAxOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgIH0NCiAgICAgICAgfQ0KICAgICAgICB0Ym9keSB7DQogICAgICAgICAgdHIgew0KICAgICAgICAgICAgdGQgew0KICAgICAgICAgICAgICBpbnB1dCB7DQogICAgICAgICAgICAgICAgd2lkdGg6IDEwMCU7DQogICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgLy8gICBpbnB1dFt0eXBlPSJ0ZXh0Il06ZGlzYWJsZWQgew0KICAgICAgICAgICAgICAvLyAgICAgYmFja2dyb3VuZDogI2VjZWNlYzsNCiAgICAgICAgICAgICAgLy8gICB9DQogICAgICAgICAgICB9DQogICAgICAgICAgfQ0KICAgICAgICB9DQogICAgICB9DQogICAgfQ0KICAgIC50YWJsZS1idXR0b24gew0KICAgICAgZGlzcGxheTogZmxleDsNCiAgICAgIGhlaWdodDogNjVweDsNCiAgICAgIGFsaWduLWl0ZW1zOiBjZW50ZXI7DQogICAgICBkaXYgew0KICAgICAgICBtYXJnaW4tcmlnaHQ6IDE2cHg7DQogICAgICB9DQogICAgfQ0KICB9DQogIC5mb290ZXIgew0KICAgIGhlaWdodDogNjBweDsNCiAgICBiYWNrZ3JvdW5kLWNvbG9yOiBsaWdodGdyZXk7DQogICAgcGFkZGluZzogMCAxNnB4Ow0KICAgIGFsaWduLWl0ZW1zOiBjZW50ZXI7DQogICAgZGlzcGxheTogZmxleDsNCiAgICBqdXN0aWZ5LWNvbnRlbnQ6IHNwYWNlLWJldHdlZW47DQogICAgLmFsaWduLXJpZ2h0IHsNCiAgICAgIGRpc3BsYXk6IGZsZXg7DQogICAgICBkaXYgew0KICAgICAgICBtYXJnaW4tbGVmdDogMTZweDsNCiAgICAgIH0NCiAgICB9DQogIH0NCn0NCg=="},{"version":3,"sources":["EvaluateDetail.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA2eA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"EvaluateDetail.vue","sourceRoot":"src/views/evaluate/component","sourcesContent":["<template>\r\n  <div class=\"detail-container\">\r\n    <div class=\"summary-input\">\r\n      <div class=\"d-header\">\r\n        <div class=\"back-btn icon-back\" @click=\"closeDetail\"></div>\r\n        <div class=\"header-title\">\r\n          Đánh giá lại tài sản cố định\r\n          {{ selectedReport ? selectedReport.sobienban : \"\" }}\r\n        </div>\r\n      </div>\r\n\r\n      <div class=\"input-container\">\r\n        <div class=\"left-pane\">\r\n          <div class=\"first-line\">\r\n            <div class=\"input-field\">\r\n              <div class=\"input-label\">Biên bản số</div>\r\n              <input\r\n                v-model=\"soBienBan\"\r\n                  :disabled=\"disableDetail\"\r\n                maxlength=\"255\"\r\n                class=\"input-two-third\"\r\n                type=\"text\"\r\n              />\r\n            </div>\r\n\r\n            <div class=\"current-date\">\r\n              <div class=\"input-field\">\r\n                <div class=\"input-label\">Ngày</div>\r\n                <!-- <input v-model=\"ngayLap\" type=\"date\" /> -->\r\n                <datepicker\r\n                  class=\"date-picker\"\r\n                  :disabled=\"disableDetail\"\r\n                  v-model=\"ngayLap\"\r\n                  format=\"dd - MM - yyyy\"\r\n                  required\r\n                ></datepicker>\r\n              </div>\r\n            </div>\r\n          </div>\r\n          <!-- <h1>{{lyDo}}</h1> -->\r\n          <div class=\"reason\">\r\n            <div class=\"input-field\">\r\n              <div class=\"input-label\">Lý do</div>\r\n              <v-autocomplete\r\n                :items=\"listLyDo\"\r\n                item-text=\"text\"\r\n                  :disabled=\"disableDetail\"\r\n                item-value=\"value\"\r\n                v-model=\"lyDo\"\r\n              ></v-autocomplete>\r\n              <!-- <select v-model=\"lyDo\">\r\n                <option\r\n                  v-for=\"(item, index) in listLyDo\"\r\n                  :key=\"index\"\r\n                  :value=\"item\"\r\n                >\r\n                  {{ item }}\r\n                </option>\r\n              </select> -->\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n\r\n    <div class=\"detail-input\">\r\n      <div class=\"detail-label\">Chi tiết điều chỉnh</div>\r\n      <div class=\"table-wrapper\">\r\n        <table>\r\n          <colgroup>\r\n            <col width=\"5\" />\r\n            <col min-width=\"10\" />\r\n            <col min-width=\"100\" />\r\n            <col min-width=\"50\" />\r\n            <col min-width=\"50\" />\r\n            <col min-width=\"50\" />\r\n          </colgroup>\r\n          <thead>\r\n            <tr>\r\n              <th rowspan=\"2\">#</th>\r\n              <th rowspan=\"2\">Mã tài sản</th>\r\n              <th rowspan=\"2\">Tên tài sản</th>\r\n              <th colspan=\"3\">Giá trị còn lại</th>\r\n              <th colspan=\"3\">Thời gian sử dụng còn lại (tháng)</th>\r\n              <th colspan=\"3\">Khấu hao năm</th>\r\n            </tr>\r\n            <tr>\r\n              <th>Trước điều chỉnh</th>\r\n              <th>Sau điều chỉnh</th>\r\n              <th>Chênh lệch</th>\r\n\r\n              <th>Trước điều chỉnh</th>\r\n              <th>Sau điều chỉnh</th>\r\n              <th>Chênh lệch</th>\r\n\r\n              <th>Trước điều chỉnh</th>\r\n              <th>Sau điều chỉnh</th>\r\n              <th>Chênh lệch</th>\r\n            </tr>\r\n          </thead>\r\n\r\n          <tbody>\r\n            <tr v-for=\"(item, index) in detailList\" :key=\"item.id\">\r\n              <td>\r\n                {{ index }}\r\n              </td>\r\n              <td>\r\n                <v-autocomplete\r\n                  :items=\"availableAsset\"\r\n                  item-text=\"mataisan\"\r\n                  item-value=\"idtaisan\"\r\n                  v-model=\"item.assetId\"\r\n                  no-data-text=\"Không có dữ liệu\"\r\n                  cache-items=\"true\"\r\n                  :disabled=\"disableDetail\"\r\n                  @change=\"onChangeAsset(item)\"\r\n                ></v-autocomplete>\r\n              </td>\r\n              <td>\r\n                <v-autocomplete\r\n                  :items=\"availableAsset\"\r\n                  :disabled=\"disableDetail\"\r\n                  item-text=\"tentaisan\"\r\n                  item-value=\"idtaisan\"\r\n                  v-model=\"item.assetId\"\r\n                  cache-items=\"true\"\r\n                  no-data-text=\"Không có dữ liệu\"\r\n                  @change=\"onChangeAsset(item)\"\r\n                ></v-autocomplete>\r\n              </td>\r\n              <td>\r\n                {{ item.valueBefore }}\r\n              </td>\r\n              <td>\r\n                <div class=\"input-field\">\r\n                  <input\r\n                    v-model=\"item.valueAfter\"\r\n                  :disabled=\"disableDetail\"\r\n                    class=\"input-two-third\"\r\n                    type=\"number\"\r\n                  />\r\n                </div>\r\n              </td>\r\n              <td>\r\n                {{ item.valueBefore - item.valueAfter }}\r\n              </td>\r\n              <td>{{ item.timeBefore }}</td>\r\n              <td>\r\n                <div class=\"input-field\">\r\n                  <input\r\n                    v-model=\"item.timeAfter\"\r\n                  :disabled=\"disableDetail\"\r\n                    class=\"input-two-third\"\r\n                    type=\"number\"\r\n                  />\r\n                </div>\r\n              </td>\r\n              <td>\r\n                {{ item.timeBefore - item.timeAfter }}\r\n              </td>\r\n              <td>{{ item.depreciationBefore }}</td>\r\n              <td>\r\n                <div class=\"input-field\">\r\n                  <input\r\n                    v-model=\"item.depreciationAfter\"\r\n                  :disabled=\"disableDetail\"\r\n                    class=\"input-two-third\"\r\n                    type=\"number\"\r\n                  />\r\n                </div>\r\n              </td>\r\n              <td>\r\n                {{ item.depreciationBefore - item.depreciationAfter }}\r\n              </td>\r\n            </tr>\r\n          </tbody>\r\n        </table>\r\n      </div>\r\n\r\n      <div class=\"table-button\" v-show=\"!disableDetail\">\r\n        <BaseButton class=\"solid\" @click=\"addDetailLine\"\r\n          >Thêm dòng mới</BaseButton\r\n        >\r\n        <BaseButton class=\"solid\" @click=\"deleteLastLine\"\r\n          >Xóa dòng cuối</BaseButton\r\n        >\r\n        <BaseButton class=\"solid\" @click=\"deleteAllLine\"\r\n          >Xóa hết dòng</BaseButton\r\n        >\r\n      </div>\r\n    </div>\r\n\r\n    <div class=\"footer\">\r\n      <div class=\"align-left\">\r\n        <BaseButton @click=\"closeDetail\">Hủy</BaseButton>\r\n      </div>\r\n      <div class=\"align-right\" v-show=\"!disableDetail\">\r\n        <BaseButton @click=\"saveAndNew\">Cất và thêm</BaseButton>\r\n        <BaseButton @click=\"saveAndClose\" class=\"active-contrast\"\r\n          >Cất và đóng</BaseButton\r\n        >\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\n// import BaseDatetimePicker from \"@/views/evaluate/base/BaseDatetimePicker.vue\";\r\n// import BaseAutocomplete from \"@/views/evaluate/base/BaseAutocomplete.vue\";\r\nimport BaseButton from \"@/views/evaluate/base/BaseButton.vue\";\r\nimport axios from \"axios\";\r\nimport { mapState } from \"vuex\";\r\nimport Dropdown from \"vue-simple-search-dropdown\";\r\nimport datepicker from \"vuejs-datepicker\";\r\n\r\nexport default {\r\n  components: {\r\n    // BaseDatetimePicker,\r\n    // BaseAutocomplete,\r\n    BaseButton,\r\n    datepicker,\r\n    Dropdown,\r\n  },\r\n  props: {},\r\n  data() {\r\n    return {\r\n      bienBanDanhGiaTaiSanId: null,\r\n      soBienBan: \"\",\r\n      ngayLap: \"\",\r\n      lyDo: null,\r\n      listLyDo: [\r\n        {\r\n          text: \"Tháo dỡ một hay một số bộ phận tài sản giảm giá trị tài sản\",\r\n          value: \"Tháo dỡ một hay một số bộ phận tài sản giảm giá trị tài sản\",\r\n        },\r\n        {\r\n          text: \"Đánh giá lại tài sản nhằm mục đích liên doanh, góp vốn, chia tách, hợp nhất, giải thể\",\r\n          value:\r\n            \"Đánh giá lại tài sản nhằm mục đích liên doanh, góp vốn, chia tách, hợp nhất, giải thể\",\r\n        },\r\n        {\r\n          text: \"Đánh giá lại theo yêu cầu kê biên tài sản của cơ quan có thẩm quyền nhà nước\",\r\n          value:\r\n            \"Đánh giá lại theo yêu cầu kê biên tài sản của cơ quan có thẩm quyền nhà nước\",\r\n        },\r\n      ],\r\n      detailList: [],\r\n    };\r\n  },\r\n  mounted() {\r\n    this.bienBanDanhGiaTaiSanId = this.generateGUID();\r\n    this.addDetailLine();\r\n  },\r\n  methods: {\r\n    async saveDetailLine(line) {\r\n      try {\r\n        var req = {\r\n          giatritruocdieuchinh: line.valueBefore,\r\n          giatrisaudieuchinh: line.valueBefore,\r\n          thoigiantruocdieuchinh: line.timeBefore.toString(),\r\n          thoigiansaudieuchinh: line.timeAfter.toString(),\r\n          khauhaotruocdieuchinh: line.depreciationBefore,\r\n          khauhaosaudieuchinh: line.depreciationAfter,\r\n          bienBanDanhGiaTaiSanId: this.bienBanDanhGiaTaiSanId,\r\n          idtaisan: line.assetId,\r\n        };\r\n        console.log(\"Req chi tiet: \" + JSON.stringify(req));\r\n        await axios.post(\"https://localhost:44327/api/ChiTietDanhGia\", req);\r\n      } catch {\r\n        console.error(\"Thêm chi tiết biên bản bị lỗi\");\r\n        throw \"Thêm chi tiết biên bản bị lỗi\";\r\n      }\r\n    },\r\n\r\n    onChangeAsset(item) {\r\n      // console.log(\"CHANGE VUETIFYY\");\r\n      // Vue.set(item, \"assetId\", item.assetId);\r\n      item.valueAfter = this.getAssetValue(item.assetId, \"giatriconlai\");\r\n      item.valueBefore = item.valueAfter;\r\n      item.timeAfter = this.getAssetValue(item.assetId, \"thoigianconlai\");\r\n      item.timeBefore = item.timeAfter;\r\n      item.depreciationAfter = this.getAssetValue(\r\n        item.assetId,\r\n        \"giatritinhkhauhao\"\r\n      );\r\n      item.depreciationBefore = item.depreciationAfter;\r\n    },\r\n    getAssetValue(assetId, propName) {\r\n      // console.log(\"VAo get asset value r\");\r\n      try {\r\n        return this.assetList.filter((x) => x.idtaisan == assetId)[0][propName];\r\n      } catch {\r\n        return 0;\r\n      }\r\n    },\r\n    isAssetIdChoosen(assetId) {\r\n      for (let index = 0; index < this.detailList.length; index++) {\r\n        const element = this.detailList[index];\r\n        if (element.assetId == assetId) {\r\n          return true;\r\n        }\r\n      }\r\n      return false;\r\n    },\r\n    deleteAllLine() {\r\n      this.detailList = [];\r\n      this.addDetailLine();\r\n    },\r\n    deleteLastLine() {\r\n      this.detailList.splice(this.detailList.length - 1, 1);\r\n      if (this.detailList.length == 0) {\r\n        this.addDetailLine();\r\n      }\r\n    },\r\n\r\n    addDetailLine() {\r\n      this.detailList.push({\r\n        id: this.generateGUID(),\r\n        assetId: null,\r\n        valueBefore: null,\r\n        valueAfter: null,\r\n        timeBefore: null,\r\n        timeAfter: null,\r\n        depreciationBefore: null,\r\n        depreciationAfter: null,\r\n      });\r\n    },\r\n\r\n    generateGUID() {\r\n      return \"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx\".replace(\r\n        /[xy]/g,\r\n        function (c) {\r\n          var r = (Math.random() * 16) | 0,\r\n            v = c == \"x\" ? r : (r & 0x3) | 0x8;\r\n          return v.toString(16);\r\n        }\r\n      );\r\n    },\r\n\r\n    /**\r\n     * đóng form detail\r\n     */\r\n    closeDetail() {\r\n      this.$emit(\"toggleShowDetail\");\r\n      this.clearExistingDetail();\r\n    },\r\n    /**\r\n     * Xóa dữ liệu detail hiện tại\r\n     */\r\n    clearExistingDetail() {\r\n      this.soBienBan = \"\";\r\n      this.ngayLap = Date();\r\n      this.lyDo = \"\";\r\n      this.detailList = [];\r\n      this.addDetailLine();\r\n      this.$store.commit(\"evaluate/SET_SELECTED_REPORT\", null);\r\n    },\r\n\r\n    validate() {\r\n      if (!this.soBienBan) {\r\n        this.$toast.error(\"Số biên bản không được để trống\");\r\n        return false;\r\n      }\r\n      if (!this.ngayLap) {\r\n        this.$toast.error(\"Ngày lập không được để trống\");\r\n        return false;\r\n      }\r\n      if (!this.lyDo) {\r\n        this.$toast.error(\"Lý do không được để trống\");\r\n        return false;\r\n      }\r\n\r\n      for (let index = 0; index < this.detailList.length; index++) {\r\n        const data = this.detailList[index];\r\n        for (var key in data) {\r\n          if (!data[key]) {\r\n            this.$toast.error(\"Không được để trống trường \" + key);\r\n            return false;\r\n          }\r\n        }\r\n      }\r\n      return true;\r\n    },\r\n\r\n    /**\r\n     * Cất và thêm\r\n     *  */\r\n    async saveAndNew() {\r\n      if (this.validate() == false) return;\r\n\r\n      try {\r\n        await this.saveEvaluateDetail();\r\n        this.clearExistingDetail();\r\n      } catch {\r\n        console.error(\"Loi xay ra roi\");\r\n      }\r\n    },\r\n    /**\r\n     * Cất và đóng\r\n     *  */\r\n    async saveAndClose() {\r\n      if (this.validate() == false) return;\r\n\r\n      try {\r\n        await this.saveEvaluateDetail();\r\n        this.closeDetail();\r\n      } catch {\r\n        console.error(\"Loi xay ra roi\");\r\n      }\r\n    },\r\n    /**\r\n     * Lưu chi tiết biên bản đánh giá\r\n     */\r\n    async saveEvaluateDetail() {\r\n      try {\r\n        var req = {\r\n          bienBanDanhGiaTaiSanId: this.bienBanDanhGiaTaiSanId,\r\n          ngaylap: this.ngayLap,\r\n          lydo: this.lyDo,\r\n          sobienban: this.soBienBan,\r\n        };\r\n\r\n        console.log(\"Bienbandanhgia before post: \" + JSON.stringify(req));\r\n        var res = await axios.post(\r\n          \"https://localhost:44382/api/v1/bienbandanhgiataisans\",\r\n          req\r\n        );\r\n        for (let index = 0; index < this.detailList.length; index++) {\r\n          const line = this.detailList[index];\r\n          await this.saveDetailLine(line);\r\n        }\r\n\r\n        this.$toast.success(\"Lưu biên bản thành công\");\r\n        this.$store.dispatch(\"evaluate/getReports\");\r\n        console.log(\"Post bienbandanhgia successfully \" + JSON.stringify(res));\r\n        return res;\r\n      } catch (err) {\r\n        console.error(err.response);\r\n        if (!this.ngayLap) this.$toast.error(\"Ngày lập không được để trống\");\r\n        else this.$toast.error(\"Lưu biên bản thất bại\");\r\n        this.bienBanDanhGiaTaiSanId = this.generateGUID();\r\n        throw err;\r\n      }\r\n    },\r\n  },\r\n  computed: {\r\n    ...mapState({\r\n      selectedReport: (state) => state.evaluate.selectedReport,\r\n      assetList: (state) => state.evaluate.assetList,\r\n      disableDetail: (state) => state.evaluate.disableDetail,\r\n    }),\r\n\r\n    /**\r\n     * Tài sản còn có thể chọn\r\n     */\r\n    availableAsset() {\r\n      return this.assetList;\r\n      // if (this.detailList.length <= 1) return this.assetList;\r\n      // return this.assetList.filter((x) => !this.isAssetIdChoosen(x.idtaisan));\r\n    },\r\n  },\r\n  watch: {\r\n    selectedReport(newVal) {\r\n      if (newVal) {\r\n        this.soBienBan = newVal.report.sobienban;\r\n        this.ngayLap = newVal.report.ngaylap;\r\n        this.lyDo = newVal.report.lydo;\r\n        this.bienBanDanhGiaTaiSanId = newVal.report.bienBanDanhGiaTaiSanId;\r\n        this.detailList = [];\r\n        for (let index = 0; index < newVal.reportDetails.length; index++) {\r\n          const d = newVal.reportDetails[index];\r\n          this.detailList.push({\r\n            id: d.chiTietBienBanDanhGiaId,\r\n            assetId: d.idtaisan,\r\n            valueBefore: d.giatritruocdieuchinh,\r\n            valueAfter: d.giatrisaudieuchinh,\r\n            timeBefore: d.thoigiantruocdieuchinh,\r\n            timeAfter: d.thoigiansaudieuchinh,\r\n            depreciationBefore: d.khauhaotruocdieuchinh,\r\n            depreciationAfter: d.khauhaosaudieuchinh,\r\n          });\r\n          // Vue.set(this.detailList[index], \"assetId\", d.idtaisan);\r\n        }\r\n      } else {\r\n        this.bienBanDanhGiaTaiSanId = this.generateGUID();\r\n      }\r\n    },\r\n  },\r\n};\r\n</script>\r\n<style lang=\"scss\" scoped>\r\n@import \"@/style/_variables.scss\";\r\n\r\n.detail-container {\r\n  width: 100%;\r\n  height: 100%;\r\n\r\n  .input-field {\r\n    .input-label {\r\n      font-family: \"GoogleSans-Bold\";\r\n    }\r\n    input {\r\n      height: 36px;\r\n      box-sizing: border-box;\r\n      border: #d6d6d6 1px solid;\r\n      padding: 10px;\r\n      background-color: white;\r\n    }\r\n    .date-picker {\r\n      border: #d6d6d6 1px solid;\r\n    }\r\n    select {\r\n      background-color: white;\r\n      border: #d6d6d6 1px solid;\r\n      height: 34px;\r\n      min-width: 100px;\r\n      padding-left: 10px;\r\n    }\r\n  }\r\n\r\n  .summary-input {\r\n    background-color: $background-evalutate;\r\n    padding: 16px 16px 0px 16px;\r\n    height: fit-content;\r\n\r\n    .d-header {\r\n      height: 60px;\r\n      display: flex;\r\n      align-items: center;\r\n      font-size: 1.6rem;\r\n      margin-bottom: 16px;\r\n      .back-btn {\r\n        cursor: pointer;\r\n        margin-right: 20px;\r\n      }\r\n\r\n      .header-title {\r\n        font-family: \"GoogleSans-Bold\";\r\n      }\r\n    }\r\n    .input-container {\r\n      width: 100%;\r\n      display: flex;\r\n      .left-pane {\r\n        width: 80%;\r\n        // border-right: solid 1px grey;\r\n        padding-right: 16px;\r\n\r\n        .first-line {\r\n          display: flex;\r\n          justify-content: flex-start;\r\n          margin-bottom: 12px;\r\n          div {\r\n            margin-right: 12px;\r\n          }\r\n        }\r\n\r\n        .reason {\r\n          width: 100%;\r\n          .input-field {\r\n            width: 100%;\r\n            select {\r\n              width: 100%;\r\n            }\r\n          }\r\n        }\r\n      }\r\n      .right-pane {\r\n        padding-left: 16px;\r\n        width: 40%;\r\n\r\n        .record-date {\r\n          width: 300px;\r\n          margin-bottom: 12px;\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  .detail-input {\r\n    padding: 16px;\r\n    height: calc(100% - 347px);\r\n\r\n    .detail-label {\r\n      font-size: 1.2rem;\r\n      font-family: \"GoogleSans-Bold\";\r\n      margin-bottom: 8px;\r\n    }\r\n\r\n    .table-wrapper {\r\n      height: calc(100% - 85px);\r\n      overflow: auto;\r\n      border: $border-button-basic solid 1px;\r\n      table {\r\n        thead {\r\n          tr:nth-child(2) {\r\n            th {\r\n              top: 40px !important;\r\n            }\r\n          }\r\n\r\n          tr {\r\n            th {\r\n              border-right: 1px solid #d6d6d6;\r\n              z-index: 1;\r\n            }\r\n          }\r\n        }\r\n        tbody {\r\n          tr {\r\n            td {\r\n              input {\r\n                width: 100%;\r\n              }\r\n              //   input[type=\"text\"]:disabled {\r\n              //     background: #ececec;\r\n              //   }\r\n            }\r\n          }\r\n        }\r\n      }\r\n    }\r\n    .table-button {\r\n      display: flex;\r\n      height: 65px;\r\n      align-items: center;\r\n      div {\r\n        margin-right: 16px;\r\n      }\r\n    }\r\n  }\r\n  .footer {\r\n    height: 60px;\r\n    background-color: lightgrey;\r\n    padding: 0 16px;\r\n    align-items: center;\r\n    display: flex;\r\n    justify-content: space-between;\r\n    .align-right {\r\n      display: flex;\r\n      div {\r\n        margin-left: 16px;\r\n      }\r\n    }\r\n  }\r\n}\r\n</style>"]}]}